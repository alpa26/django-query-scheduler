# :bell: Система выполнения произвольных запросов по расписанию

## :bulb: Описание 
_Приложение для планирования и выполнения произвольных запросов с возможностью уведомлений, результатов и управления через веб-интерфейс._


Необходимо создать систему, которая позволяет планировать выполнение произвольных запросов к базе данных или внешним сервисам. Запросы должны выполняться по расписанию, с возможностью настройки алертов и отправки результатов. Дополнительно, система должна иметь веб-интерфейс или админку для ручного запуска задач, включения/выключения задач и автоматического перезапуска в случае сбоя (например, если база данных недоступна).


### :boy: Пользовательский флоу:
  - **Настройка задач**:
    
    - Пользователь добавляет задачу через веб-интерфейс, указывая произвольный запрос (SQL, API-запрос), расписание выполнения (например, каждый день в определенное время) и параметры задачи.


  - **Запуск задач**:

    - Задачи выполняются автоматически по расписанию. Для управления выполнением используется очередь задач (например, с использованием dramatiq или celery). 
    - Если задача не выполняется из-за недоступности базы данных или другого сбоя, система автоматически пытается перезапустить задачу через определенные промежутки времени.


  - **Получение результатов и уведомлений**:

    - Результат выводится в таблицу (в настройках указывается какая таблица).


  - **Веб-интерфейс/админка**:

    - Пользователь может вручную запускать задачи, включать или выключать их через веб-интерфейс или админку. 
    - Интерфейс позволяет просматривать историю выполнений задач, их статус и результаты. 
    - Реализована возможность автоматического перезапуска задач в случае сбоя или недоступности ресурсов.

## :wrench: Стек

- Python - основной язык программирования
- Django - основной фреймворк
- SQLite - база данных
- Dramatiq - библиотека для обработки фоновых задач
- Redis - брокер сообщений
- Request - библиотека для выполнения HTTP-запросов
- Sqlite3 - библиотека для взаимодействия с базой данных через запросы

## :gear: Установка и подготовка проекта

1. Запустите виртуально окружение:

       virtualenv myenv        
       myenv\Scripts\activate.bat

2. Установите необходимые зависимости:
        
       pip install -r requirements.txt

3. Создайте и примените миграции:
        
       python manage.py makemigrations
       python manage.py migrate 

4. Создайте суперпользователя:
        
       python manage.py createsuperuser
 
## :rocket: Запуск проекта

1. Перейдите в каталог с Redis и запустите брокер:

       redis-server

2. Запустите dramatiq:
        
       python dramatiq_setup.py core.dramatiq_tasks

3. Запустите проект:
        
       python manage.py runserver


## :globe_with_meridians: Веб интерфейс

В качестве веб интерфейса используется админка по адресу: [http://127.0.0.1:8000/admin](http://127.0.0.1:8000/admin)